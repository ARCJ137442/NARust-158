/// ä¸€æ¬¡æ€§å®ç°æŸä¸ªç»“æ„ä½“
/// * ğŸ“ã€2024-09-04 01:08:51ã€‘ç›®å‰ä¸æä¾›ã€Œä¸€æ¬¡æ€§å®ç°çš„`enum`ã€
///   * ğŸ’­ç†ç”±ï¼šæå°‘è§ï¼Œä¸€èˆ¬ç”¨`struct`è¶³ä»¥èƒœä»»å¤§å¤šåœºæ™¯
/// * ğŸ“Œå…¶ä½¿ç”¨è¯­æ³•å¦‚ä¸‹ï¼š
/// ```no_run
/// impl_once! {
///     struct ã€ä¸´æ—¶ç»“æ„ä½“åã€‘ in ï¼ˆç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼‰ {
///         ã€å­—æ®µåã€‘ : ã€å­—æ®µç±»å‹ã€‘ = ã€å­—æ®µå€¼ã€‘,
///     } impl ã€å®ç°çš„ç‰¹å¾ã€‘ {
///         trait_body
///     }
/// }
/// ```
#[macro_export]
macro_rules! impl_once {
    (
        $(#[$attr:meta])*
        struct $name:ident $(in $life:lifetime)? {
            $(
                $field_name:ident : $field_type:ty = $field_value:expr $(,)?
            )*
        }
        $(#[$attr_impl:meta])*
        impl $trait:ident {
            $($trait_body:tt)*
        }
    ) => {
        { // * ğŸ“Œæ•´ä½“æ˜¯ä¸€ä¸ªå—è¡¨è¾¾å¼
            $(#[$attr])*
            // * ğŸš©é’ˆå¯¹åŠŸèƒ½å®šä¹‰ä¸€ä¸ªç»“æ„ä½“
            struct $name $(<$life>)? {
                $(
                    $field_name : $field_type,
                )*
            }
            $(#[$attr_impl])*
            // * ğŸš©å®ç°åŠŸèƒ½
            impl $(<$life>)? $trait for $name $(<$life>)? {
                $($trait_body)*
            }
            // * ğŸš©æ„å»ºå¹¶è½½å…¥ä¸Šä¸‹æ–‡ï¼Œæ‹¿åˆ°ç‹¬å å¼•ç”¨
            //   * ğŸ“Œã€2024-09-04 01:16:25ã€‘ç›®å‰æ€»æ˜¯å–å¯å˜å¼•ç”¨ï¼šåç»­ä½¿ç”¨æ—¶å¯æ ¹æ®ã€Œç‚¹æ–¹æ³•ã€çµæ´»è°ƒç”¨
            &mut $name {
                $(
                    $field_name : $field_value,
                )*
            }
        }
    };
}
